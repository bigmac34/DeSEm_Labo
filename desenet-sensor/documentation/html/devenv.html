<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>DeseNet Documentation: Development Environment</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">DeseNet Documentation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">index</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Development Environment </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>In order to accomplish the practical work goals of the DeSEm MAS module, you will need to program for your computer and an ARM Cortex-M3 MCU (STM32F103) using exclusively open-source development tools. The following tools are needed for the development:</p>
<h1><a class="anchor" id="argouml"></a>
ArgoUML</h1>
<div class="image">
<img src="argouml-screenshot.jpg" alt="argouml-screenshot.jpg"/>
</div>
<p>ArgoUML is an open source UML modeling tool and includes support for all standard UML 1.4 diagrams.</p>
<p>We will use ArgoUML during the specification, analysis and design of the Air3T software.</p>
<h1><a class="anchor" id="eclipsecdt"></a>
Eclipse CDT</h1>
<div class="image">
<img src="eclipse-screenshot.jpg" alt="eclipse-screenshot.jpg"/>
</div>
<p>Eclipse is a multi-language software development environment comprising an integrated development environment (IDE) and an extensible plug-in system. It is written mostly in Java.</p>
<p>We will use the Eclipse IDE for booth platforms: The simulated hardware on the computer and the embedded target.</p>
<h1><a class="anchor" id="openocd"></a>
OpenOCD</h1>
<p>The Open On Chip Debugger offers the possibility to flash and debug a whole range of Embedded Processors. It supports different JTAG adapters.</p>
<p>We use OpenOCD with the HES-SO Valais Universal Tracer JTAG Adapter.</p>
<h1><a class="anchor" id="meshsimulator"></a>
Mesh Simulator</h1>
<div class="image">
<img src="mesh-simulator-screenshot.png" alt="mesh-simulator-screenshot.png"/>
</div>
<p>Mesh Simulator offers a very convenient way to simulate wired or wireless networks. It was developed at the HES-SO Valais in order to simulate and test routing protocols for mesh networks.</p>
<p>We will use Mesh Simulator to simulate the wireless ad-hoc network we will form to play Tic Tac Toe over the air during the development phase on the computer.</p>
<h1><a class="anchor" id="gcc"></a>
GCC</h1>
<p>The GNU Compiler Collection includes front ends for C, C++, Objective-C, Fortran, Java, Ada, and Go, as well as libraries for these languages (libstdc++, libgcj,...). GCC was originally written as the compiler for the GNU operating system. The GNU system was developed to be 100% free software, free in the sense that it respects the user's freedom.</p>
<p>For the development on the Linux host, we will use just the default GCC installed on the OS. To compile the application for the embedded ARM Cortex-M3 MCU, we will use a custom arm-none-eabi version of the GCC compiler with newlibc.</p>
<h1><a class="anchor" id="installation"></a>
Installation</h1>
<p>We basically offer two methods to install these tools on your computer:</p>
<ul>
<li>A VMware image based on an Ubuntu where all tools are already installed.</li>
</ul>
<h2><a class="anchor" id="vmtools"></a>
Tools on VMware image</h2>
<p>The free VMware Player offers the possibility to execute virtual machines on top of a physical computer. We provide an image based on Ubuntu which contains all development tools and is ready to use.</p>
<p>TIP: You can check using the VMware player if the virtual machine has snapshots. If this is the case, you can gain a lot of disk space by removing those snapshots.</p>
<p>The password of the desem user is "d3s3m". Feel free to change it...</p>
<p>Contact <a href="#" onclick="location.href='mai'+'lto:'+'mic'+'ha'+'el.'+'cl'+'aus'+'en'+'@he'+'vs'+'.ch'; return false;">micha<span style="display: none;">.nosp@m.</span>el.c<span style="display: none;">.nosp@m.</span>lause<span style="display: none;">.nosp@m.</span>n@he<span style="display: none;">.nosp@m.</span>vs.ch</a> if you like to get this VMware image or if you have questions about the image itself.</p>
<h2><a class="anchor" id="manualinstall"></a>
Manual installation</h2>
<p>IMPORTANT: If you use the VMware virtual machine for development, you can ignore the following section, all tools are already installed.</p>
<p>For those who have already a Linux system, the installation of VMware Player and a virtual Linux machine might be a little artificial...</p>
<p>However we can not provide much support on how to install all these tools on your Linux installation. If you have problems, you can send an email to <a href="#" onclick="location.href='mai'+'lto:'+'mic'+'ha'+'el.'+'cl'+'aus'+'en'+'@he'+'vs'+'.ch'; return false;">micha<span style="display: none;">.nosp@m.</span>el.c<span style="display: none;">.nosp@m.</span>lause<span style="display: none;">.nosp@m.</span>n@he<span style="display: none;">.nosp@m.</span>vs.ch</a>, he will assist you per mail or after the official lessons at Lausanne, but during the lessons we just have not enough time for these installations.</p>
<p>We provide here compressed archives of the tools needed as a download and some instructions how to install these tools on Ubuntu Linux. If you use another Linux Distribution than Ubuntu, you should be still able to install these tools using the archives and installers, but we can not provide instructions for all Linux distributions.</p>
<p>If you have any question, you can either ask on the forum or send a mail to <a href="#" onclick="location.href='mai'+'lto:'+'mic'+'ha'+'el.'+'cl'+'aus'+'en'+'@he'+'vs'+'.ch'; return false;">micha<span style="display: none;">.nosp@m.</span>el.c<span style="display: none;">.nosp@m.</span>lause<span style="display: none;">.nosp@m.</span>n@he<span style="display: none;">.nosp@m.</span>vs.ch</a>.</p>
<h3><a class="anchor" id="mandep"></a>
Dependencies of the installed software</h3>
<p>In order that the installed software can be used or compiled, you need to install the dependencies using apt-get:</p>
<div class="fragment"><div class="line">$ sudo apt-<span class="keyword">get</span> update</div>
<div class="line">$ sudo apt-<span class="keyword">get</span> install g++ make libboost-dev libboost-thread-dev libboost-system-dev libqt4-dev openjdk-7-jre flex bison libgmp3-dev libgmp3c2 libmpfr-dev libncurses5-dev libmpc-dev autoconf texinfo build-essential libexpat-dev wget</div>
</div><!-- fragment --><p>This will install the needed packages and all thier dependencies.</p>
<h3><a class="anchor" id="instargouml"></a>
ArgoUML</h3>
<p>Go to the ArgoUML website <a href="http://argouml.tigris.org,">http://argouml.tigris.org,</a> download and install ArgoUML. This should be quite straightforward. However you need to have a Java Runtime Environment (JRE) on your machine in order to run ArgoUML. Refer to your Distribution's Documentation how to install a JRE. If you have installed the dependencies above you are already fine since it contains already the OpenJDK 7 (openjdk-7-jre).</p>
<h3><a class="anchor" id="insteclipse"></a>
Eclipse CDT</h3>
<p>Eclipse can be downloaded from <a href="http://www.eclipse.org">http://www.eclipse.org</a>. Please install the CDT (Eclipse IDE for C/C++ Developers) Version. Note that Eclipse needs a JRE as well.</p>
<p>IMPORTANT: Do not download Eclipse Juno! This release really does not work at all for C/C++. Please consider downloading the older version "Indigo" instead.</p>
<p>To be able to configure a cross development tool chain, you need to install the GNU ARM Eclipse plugin. Follow the instructions on the website in order to install the plugin within Eclipse.</p>
<p>In order to debug using OpenOCD, you need to install the "CDT Hardware Debugging plugin". In Eclipse, go to "Help-&gt;Install new software". Select "--All Available Sites--" in the combobox on top and type "Hardware" in the filter. Select "C/C++ GDB Hardware Debugging" plugin and install it.</p>
<p>Your Eclipse installation is now ready to develop embedded software for ARM MCUs.</p>
<h3><a class="anchor" id="instopenocd"></a>
OpenOCD</h3>
<p>This is quite easy. Just type (Ubuntu &amp; Debian):</p>
<div class="fragment"><div class="line">$ sudo apt-<span class="keyword">get</span> update</div>
<div class="line">$ sudo apt-<span class="keyword">get</span> install openocd</div>
</div><!-- fragment --><p>This installs the OpenOCD daemon and all his dependencies.</p>
<p>Before you debug the project, you need to start OpenOCD with the following parameters:</p>
<div class="fragment"><div class="line">$ sudo openocd -f interface/jtagkey2.cfg -f board/olimex_stm32_h103.cfg</div>
</div><!-- fragment --><p>This starts the OpenOCD deamon and GDB can connect to the deamon in order to debug on the ARM Cortex-M3 MCU.</p>
<p>If you like to automate the startup of OpenOCD in Eclipse, you just have to add an "Externet Tool" and set the following options:</p>
<ul>
<li>Location : /usr/bin/openocd</li>
<li>Working directory : /usr/share/openocd</li>
<li>Arguments : -f interface/jtagkey2.cfg -f board/olimex_stm32_h103.cfg</li>
</ul>
<h3><a class="anchor" id="instgcc"></a>
ARM GCC</h3>
<p>We will use GCC 4.5 and GDB 7.2 for the development. Clearly this GCC version is outdated, but we are sure that the whole toolchain including GCC, GDB and OpenOCD work together.</p>
<p>We use a custom arm-none-eabi-gcc to compile the project. You can download the 32-bit, respective the 64-bit version from here:</p>
<ul>
<li>32-bit arm-none-eabi-gcc : <a href="http://moodle.msengineering.ch/file.php/255/Development_Environment/32bit/arm-none-eabi-gcc.tar.bz2.part1">Part 1</a> , <a href="http://moodle.msengineering.ch/file.php/255/Development_Environment/32bit/arm-none-eabi-gcc.tar.bz2.part2">Part 2</a></li>
<li>64-bit arm-none-eabi-gcc : <a href="http://moodle.msengineering.ch/file.php/255/Development_Environment/64bit/arm-none-eabi-gcc.tar.bz2.part1">Part 1</a> , <a href="http://moodle.msengineering.ch/file.php/255/Development_Environment/64bit/arm-none-eabi-gcc.tar.bz2.part2">Part 2</a></li>
</ul>
<p>Then install the compiler as follows (You need to be in the directory the downloaded files are saved to):</p>
<div class="fragment"><div class="line">$ cat arm-none-eabi-gcc.tar.bz2.part{1,2} &gt;&gt; arm-none-eabi-gcc.tar.bz2</div>
<div class="line">$ sudo tar -xvjf arm-none-eabi-gcc.tar.bz2 -C /opt</div>
<div class="line">$ rm arm-none-eabi-gcc.* </div>
</div><!-- fragment --><p>Our Eclipse projects are configured with GCC at this location, so do not install to any other location if not really necessary.</p>
<p>If you really want to do it the hard way, you can compile GCC, newlibc and GDB yourself using <a href="http://moodle.msengineering.ch/file.php/255/Development_Environment/arm-toolchain-build.tar">this</a> script:</p>
<div class="fragment"><div class="line">$ tar -xvf arm-toolchain-build.tar</div>
<div class="line">$ cd arm-toolchain-build</div>
<div class="line">$ chmod a+x buildToolchain.sh</div>
<div class="line">$ ./buildToolchain.sh</div>
</div><!-- fragment --><p>It is very important that you add the compiler path "/opt/toolchains/arm-none-eabi/bin" to the PATH variable of your environment before starting Eclipse. You can put that inside your bash.rc script to have the path set every time you open a console.</p>
<div class="fragment"><div class="line">$ export PATH=$PATH:/opt/toolchains/arm-none-eabi/bin</div>
</div><!-- fragment --><h3><a class="anchor" id="instmeshsim"></a>
Mesh Simulator</h3>
<p>Download either the <a href="http://moodle.msengineering.ch/file.php/255/Development_Environment/32bit/MeshSimulator32">32 bit</a> or <a href="http://moodle.msengineering.ch/file.php/255/Development_Environment/64bit/MeshSimulator64">64 bit</a> version, depending if you use a 32 bit or 64 bit OS.</p>
<p>Install as follows (XX stands for either 32 or 64, depending the version you just downloaded):</p>
<div class="fragment"><div class="line">$ sudo mkdir -p /opt/MeshSimulator</div>
<div class="line">$ sudo mv MeshSimulatorXX /opt/MeshSimulator/MeshSimulator</div>
<div class="line">$ sudo chmod +x /opt/MeshSimulator/MeshSimulator</div>
</div><!-- fragment --><p>To start the mesh simulator, simple enter:</p>
<div class="fragment"><div class="line">$ /opt/MeshSimulator/MeshSimulator</div>
</div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Mar 31 2017 15:30:37 for DeseNet Documentation by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
